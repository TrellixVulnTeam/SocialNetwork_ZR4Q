{% extends 'base_apps.html' %}

{% block title %}
    Details
{% endblock title %}

{% block content %}


        <div class="ui segment">
           <div class="ui grid text-center">
              {{object}}'s profile

                    <div class="row">
                        <div class="three wide column" >
                            <img class=" rounded-circle article-img" src="{{ object.profile_photo.url }}" alt="" >
                        </div>
                        <div class="thirteen wide column">
                            <h6>{{object.user}}</h6>
                            <h6>{{object.description}}</h6>

                            {% if object.user not in rel_receiver and object.user not in rel_sender %}
                                <form action="{% url 'send_invits' %}" method="POST">
                                    {% csrf_token %}
                                    <input type="hidden" name="profile_pk" value="{{object.pk}}">
                                    
                                        <button type="submit" class="btn btn-outline-success view-profile"><i class="plus square icon"></i>Add</button>
                                </form>
                            {% endif %}

                            {% if object.user in rel_receiver and request.user not in object.friends.all %}
                                <button class="btn btn-outline-secondary view-profile"><i class="user icon"></i>Waiting...</button>
                            {% endif %}

                            {% if request.user in object.friends.all %}
                                <form action="{% url 'remove_friends' %}" method="POST">
                                    {% csrf_token %}

                                    <input type="hidden" name="profile_pk" value="{{object.pk}}">
                                    
                                        <button type="submit" class="btn btn-outline-danger view-profile"><i class="minus square icon"></i>Remove</button>
                                </form>
                            {% endif %}  
                            <div class="ui vertical fluid menu">
                                <div class="item">
                                    Posts 
                                    <div class="ui label">{{object.get_posts_no}}</div>
                                </div>
                                <div class="item">
                                    Likes 
                                    <div class="ui label">{{object.get_likes_recieved_no}}</div>
                                </div>
                                <div class="item">
                                    Friends 
                                    <div class="ui label">{{object.get_friends_no}}</div>
                                </div>
                            
                            </div>
                            <div class="twelve wide column">
                                {% if len_posts %}
                                    {% for post in posts %}
                                        <div class="ui segment">
                                            {{post.description}} <br>
                                            {{post.createdTime}} <br>
                                            {{post.createdTime|timesince}} ago
                                        </div>
                    
                                    {% endfor %}
                                {% else %}
                                    <h3 >No posts for this user</h3>
                                    <br>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <hr>
    
           </div> 
        </div>
        
    

{% endblock content %}